<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Mis pedidos | BarberShop</title>

    <!-- BOOTSTRAP -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- ESTILOS GENERALES -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/usuario.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/mis_pedidos.css') }}"
    />

    <!-- DESACTIVAR HOVER / TRANSICIONES EN TARJETAS SOLO EN ESTA PÁGINA -->
    <style>
      .glass-card,
      .pedido-card {
        transition: none !important;
        transform: none !important;
      }

      .glass-card:hover,
      .pedido-card:hover {
        transform: none !important;
      }
    </style>
  </head>

  <body>
    <main class="contenido">

      <!-- HEADER -->
      <header class="panel-header glass-header d-flex justify-content-between align-items-center mb-4">
        <div>
          <h2 class="fw-bold mb-0">
            <i class="bi bi-receipt-cutoff me-2"></i> Mis pedidos
          </h2>
          <p class="mb-0">Consulta aquí tus compras realizadas.</p>
        </div>
        <div class="d-flex gap-3">
          <a href="/tienda" class="btn btn-outline-light" style="border: #5c49dc 1px solid !important;">
            <i class="bi bi-bag-fill me-1"></i> Tienda
          </a>

          <a href="/dashboard/usuario" class="btn btn-outline-light">
              <i class="bi bi-arrow-left me-1"></i>Volver
          </a>
        </div>
      </header>

      <!-- CONTENIDO -->
      <div class="container">

        <!-- MENSAJE SIN PEDIDOS -->
        {% if not pedidos %}
        <div class="alert alert-info glass-card text-center p-4 text-white">
          <i class="bi bi-inbox display-6 d-block mb-2"></i>
          <h5 class="fw-bold">Aún no tienes pedidos registrados.</h5>
        </div>
        {% else %}

        <!-- LISTA DE PEDIDOS -->
        <div class="row g-4 ">
          {% for p in pedidos %}
          <div class="col-12 col-md-6 col-lg-4">

            <div class="pedido-card glass-card shadow-lg p-3">

              <!-- ENCABEZADO -->
              <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="pedido-id fw-bold">Pedido #{{ p.id }}</span>

                <span
                  class="badge estado-badge 
                    {% if p.estado == 'pendiente' %} bg-warning text-dark
                    {% elif p.estado == 'completado' %} bg-success 
                    {% else %} bg-secondary 
                    {% endif %}">
                  {{ p.estado|capitalize }}
                </span>
              </div>

              <!-- CUERPO -->
              <div class="pedido-body mt-2">
                <p class="mb-1">
                  <i class="bi bi-calendar-week me-1"></i>
                  <strong>Fecha:</strong> {{ p.fecha }}
                </p>

                <p class="mb-1">
                  <i class="bi bi-cash-coin me-1"></i>
                  <strong>Total:</strong> $ {{ "%.2f"|format(p.total) }}
                </p>
              </div>

              <!-- FOOTER -->
              <div class="pedido-footer mt-3 d-flex gap-2">
                <a
                  href="/pedido/{{ p.id }}/detalle"
                  class="btn btn-sm btn-outline-light w-50"
                >
                  <i class="bi bi-eye"></i> Ver detalle
                </a>

                <a
                  href="/pedido/{{ p.id }}/pdf"
                  class="btn btn-sm btn-neon w-50"
                >
                  <i class="bi bi-file-earmark-arrow-down"></i> PDF
                </a>
              </div>

            </div>
          </div>
          {% endfor %}
        </div>

        {% endif %}
      </div>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
