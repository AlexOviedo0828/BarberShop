<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Mis pedidos | BarberShop</title>

    <!-- BOOTSTRAP -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/mis_pedidos.css') }}"
    />
  </head>

  <body class="bg-barber">
    <div class="container py-5">
      <!-- HEADER -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="title-neon">
          <i class="bi bi-receipt-cutoff me-2"></i> Mis pedidos
        </h2>

        <a href="/tienda" class="btn btn-volver">
          <i class="bi bi-arrow-left"></i> Volver a la tienda
        </a>
      </div>

      <!-- SIN PEDIDOS -->
      {% if not pedidos %}
      <div class="alert alert-info glass-alert text-center p-4">
        <i class="bi bi-inbox display-6 d-block mb-2"></i>
        AÃºn no tienes pedidos registrados.
      </div>
      {% else %}

      <!-- LISTA DE PEDIDOS -->
      <div class="row g-4">
        {% for p in pedidos %}
        <div class="col-12 col-md-6 col-lg-4">
          <div class="pedido-card glass-card shadow-lg">
            <!-- HEADER -->
            <div
              class="pedido-header d-flex justify-content-between align-items-center"
            >
              <span class="pedido-id">Pedido #{{ p.id }}</span>

              <span
                class="badge estado-badge {% if p.estado == 'pendiente' %} bg-warning text-dark {% elif p.estado == 'proceso' %} bg-primary {% elif p.estado == 'camino' %} bg-info text-dark {% elif p.estado == 'entregado' %} bg-success {% else %} bg-secondary {% endif %}"
              >
                {{ p.estado|capitalize }}
              </span>
            </div>

            <!-- BODY -->
            <div class="pedido-body mt-2">
              <p class="mb-1">
                <i class="bi bi-calendar-week me-1"></i>
                <strong>Fecha:</strong> {{ p.fecha }}
              </p>

              <p class="mb-1">
                <i class="bi bi-cash-coin me-1"></i>
                <strong>Total:</strong> $ {{ "%.2f"|format(p.total) }}
              </p>
            </div>

            <!-- FOOTER -->
            <div class="pedido-footer mt-3 d-flex gap-2">
              <a
                href="/pedido/{{ p.id }}/detalle"
                class="btn btn-sm btn-outline-light w-50"
              >
                <i class="bi bi-eye"></i> Ver detalle
              </a>

              <a href="/pedido/{{ p.id }}/pdf" class="btn btn-sm btn-neon w-50">
                <i class="bi bi-file-earmark-arrow-down"></i> PDF
              </a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      {% endif %}
    </div>
  </body>
</html>
