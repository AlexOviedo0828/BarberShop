<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Detalle pedido #{{ pedido.id }} | BarberShop</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/detalles_pedido.css') }}"
    />
  </head>

  <body class="bg-barber">
    <div class="container py-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="title-neon">Pedido #{{ pedido.id }}</h2>

        <a href="/mis_pedidos" class="btn btn-volver">
          <i class="bi bi-arrow-left"></i> Volver a mis pedidos
        </a>
      </div>

      <div class="card pedido-detalle-card mb-3">
        <div class="card-body">
          <p><strong>Fecha:</strong> {{ pedido.fecha }}</p>
          <p><strong>Estado:</strong> {{ pedido.estado }}</p>
          <p><strong>Dirección:</strong> {{ pedido.direccion }}</p>
          <p><strong>Método de pago:</strong> {{ pedido.metodo_pago }}</p>
        </div>
      </div>

      <h4 class="text-light">Productos</h4>

      <table class="tabla-detalles mt-2">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          {% for d in detalles %}
          <tr>
            <td>{{ d.producto_nombre }}</td>
            <td>{{ d.cantidad }}</td>
            <td>$ {{ '%.2f'|format(d.precio) }}</td>
            <td>$ {{ '%.2f'|format(d.precio * d.cantidad) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <h4 class="mt-3 text-end text-neon">
        Total: $ {{ '%.2f'|format(pedido.total) }}
      </h4>

      <div class="mt-3 text-end">
        <a href="/pedido/{{ pedido.id }}/pdf" class="btn btn-neon">
          <i class="bi bi-file-earmark-arrow-down"></i> Descargar PDF
        </a>
      </div>
    </div>
  </body>
</html>
