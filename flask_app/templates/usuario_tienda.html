<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tienda BarberShop</title>

    <!-- BOOTSTRAP -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- ICONOS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- SWEET ALERT -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- CSS PERSONALIZADO -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/admin_productos.css') }}"
    />
  </head>

  <body>
    <div class="container-fluid py-4">
      <!-- HEADER -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="title-neon">Tienda BarberShop</h2>

        <!-- ICONO CARRITO EN BLANCO -->
        <button class="btn btn-cart" onclick="toggleCarrito()">
          <i class="bi bi-cart3 text-white fs-3"></i>
          <span id="carrito-count" class="badge bg-danger ms-1">0</span>
        </button>
      </div>

      <!-- BOTÃ“N VOLVER -->
      <div class="d-flex justify-content-end mb-3">
        <a href="dashboard/usuario" class="btn btn-volver">
          <i class="bi bi-arrow-left-circle"></i> Volver
        </a>
      </div>
      <!-- BUSCADOR -->
      <div class="search-bar-wrapper mb-4">
        <div class="search-bar-container shadow-lg">
          <i class="bi bi-search search-icon"></i>
          <input
            type="text"
            id="searchInput"
            class="search-input"
            placeholder="Buscar producto..."
            onkeyup="filtrarProductos()"
          />
        </div>
      </div>

      <!-- ===========================
           CARRUSEL NUEVO COMPLETO
      ============================== -->
      <div class="banner-wrapper">
        <div class="banner-container">
          <div
            id="carouselExample"
            class="carousel slide"
            data-bs-ride="carousel"
          >
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img
                  src="{{ url_for('static', filename='img/peluqueros/ban1.png') }}"
                  class="d-block w-100 banner-img"
                  alt="banner-1"
                />
              </div>

              <div class="carousel-item">
                <img
                  src="{{ url_for('static', filename='img/peluqueros/ban2.png') }}"
                  class="d-block w-100 banner-img"
                  alt="banner-2"
                />
              </div>

              <div class="carousel-item">
                <img
                  src="{{ url_for('static', filename='img/peluqueros/ban3.png') }}"
                  class="d-block w-100 banner-img"
                  alt="banner-3"
                />
              </div>
            </div>

            <!-- CONTROLES -->
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#carouselExample"
              data-bs-slide="prev"
            >
              <span class="carousel-control-prev-icon"></span>
            </button>

            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#carouselExample"
              data-bs-slide="next"
            >
              <span class="carousel-control-next-icon"></span>
            </button>
          </div>
        </div>
      </div>

      <!-- GRID DE PRODUCTOS -->
      <div class="row g-4" id="productosContainer">
        {% for p in productos %}
        <div class="col-12 col-sm-6 col-md-4 col-xl-3 product-item">
          <div class="card product-card shadow-lg">
            <img
              src="{{ url_for('static', filename='img/productos/' + p.imagen) }}"
              class="product-img"
              onerror="this.src='/static/img/default.png'"
            />

            <div class="card-body text-center">
              <h5 class="product-name">{{ p.nombre }}</h5>
              <p class="product-price">$ {{ '%.2f'|format(p.precio) }}</p>

              <button
                class="btn btn-neon w-100 btn-add"
                data-id="{{ p.id }}"
                data-nombre="{{ p.nombre }}"
                data-precio="{{ p.precio }}"
                data-img="{{ p.imagen }}"
              >
                Agregar al carrito <i class="bi bi-cart-plus"></i>
              </button>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- ===========================
         PANEL CARRITO BLANCO
    ============================== -->
    <div id="carrito-panel" class="carrito-panel">
      <div class="carrito-header">
        <h5 class="text-dark">Tu Carrito</h5>

        <button class="btn-close-panel" onclick="toggleCarrito()">
          <i class="bi bi-x-lg text-dark"></i>
        </button>
      </div>

      <div id="carrito-items" class="carrito-items"></div>

      <div class="carrito-footer">
        <h4>Total: $<span id="carrito-total">0</span></h4>

        <button class="btn-checkout" onclick="checkout()">
          Finalizar compra <i class="bi bi-bag-check"></i>
        </button>
      </div>
    </div>

    <!-- JS -->
    <script src="{{ url_for('static', filename='js/carrito.js') }}"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
